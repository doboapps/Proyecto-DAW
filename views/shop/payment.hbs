<br>
<br>
<br>
<br>
<br>
<br>
<br>

<form class="container-fluid col-md-6 offset-md-3 " id="formpayment" onsubmit="return sendFormPayment();">
    <br><b>Datos de Personales:</b> 
    <hr>
    <input type="hidden" id="userEmail" value="{{dataUser.email}}" placeholder="Nombre">
    <input type="hidden" id="requestedProducts" value="{{cartProductAndUnid}}" placeholder="Nombre">
    <input type="hidden" id="total" value="{{totalPrice}}" placeholder="Nombre">


    <div class="form-group">
        <small class="form-text text-muted">Nombre:</small>
        <input type="text" class="form-control" id="name" placeholder="Nombre">
    </div>
    <div class="form-group">
        <small class="form-text text-muted">Apellidos</small>
        <input type="text" class="form-control" id="surnames" placeholder="Apellidos">
    </div>

    <div class="form-group">
        <small class="form-text text-muted">Dirección:</small>
        <input type="text" class="form-control" id="address" placeholder="Dirección">
    </div>

    <div class="form-group ">
        <small class="form-text text-muted">Esfecificaciones de Dirección:</small>
        <input type="text" class="form-control" id="specifications" placeholder="Opcional">
    </div>
    <div class="form-inline form-group ">
        <div class="form-group col-md-6 pl-0">
            <small class="form-text text-muted">Localidad:</small>
            <br>
            <input type="text" class="form-control col-sm-12" id="city" placeholder="Localidad">
        </div>

        <div class="form-group col-md-6 pr-0">
            <small class="form-text text-muted">Provincia</small>
            <br>
            <select id="province" class="custom-select col-sm-12" id="select-category">
                <option value='alava'>Álava</option>
                <option value='albacete'>Albacete</option>
                <option value='alicante'>Alicante/Alacant</option>
                <option value='almeria'>Almería</option>
                <option value='asturias'>Asturias</option>
                <option value='avila'>Ávila</option>
                <option value='badajoz'>Badajoz</option>
                <option value='barcelona'>Barcelona</option>
                <option value='burgos'>Burgos</option>
                <option value='caceres'>Cáceres</option>
                <option value='cadiz'>Cádiz</option>
                <option value='cantabria'>Cantabria</option>
                <option value='castellon'>Castellón/Castelló</option>
                <option value='ceuta'>Ceuta</option>
                <option value='ciudadreal'>Ciudad Real</option>
                <option value='cordoba'>Córdoba</option>
                <option value='cuenca'>Cuenca</option>
                <option value='girona'>Girona</option>
                <option value='laspalmas'>Las Palmas</option>
                <option value='granada'>Granada</option>
                <option value='guadalajara'>Guadalajara</option>
                <option value='guipuzcoa'>Guipúzcoa</option>
                <option value='huelva'>Huelva</option>
                <option value='huesca'>Huesca</option>
                <option value='illesbalears'>Illes Balears</option>
                <option value='jaen'>Jaén</option>
                <option value='acoruña'>A Coruña</option>
                <option value='larioja'>La Rioja</option>
                <option value='leon'>León</option>
                <option value='lleida'>Lleida</option>
                <option value='lugo'>Lugo</option>
                <option value='madrid'>Madrid</option>
                <option value='malaga'>Málaga</option>
                <option value='melilla'>Melilla</option>
                <option value='murcia'>Murcia</option>
                <option value='navarra'>Navarra</option>
                <option value='ourense'>Ourense</option>
                <option value='palencia'>Palencia</option>
                <option value='pontevedra'>Pontevedra</option>
                <option value='salamanca'>Salamanca</option>
                <option value='segovia'>Segovia</option>
                <option value='sevilla'>Sevilla</option>
                <option value='soria'>Soria</option>
                <option value='tarragona'>Tarragona</option>
                <option value='santacruztenerife'>Santa Cruz de Tenerife</option>
                <option value='teruel'>Teruel</option>
                <option value='toledo'>Toledo</option>
                <option value='valencia'>Valencia/Valéncia</option>
                <option value='valladolid'>Valladolid</option>
                <option value='vizcaya'>Vizcaya</option>
                <option value='zamora'>Zamora</option>
                <option value='zaragoza'>Zaragoza</option>
            </select>
        </div>
    </div>

    <div class="form-inline form-group">
        <div class="form-group col-md-6 pl-0">
            <small class="form-text text-muted">Código Postal:</small>
            <br>
            <input type="text" class="form-control col-sm-12" id="zip" placeholder="Código Postal">
        </div>

        <div class="form-group col-md-6 pr-0">
            <small class="form-text text-muted">País</small>
            <br>
            <select id="contry" class="custom-select col-sm-12" id="select-category">
                <option value="spain">España</option>
            </select>
        </div>
    </div><br>
    <b>Datos de Pago:</b> 
    <hr>
    <div class="form-group">
        <small class="form-text text-muted">Nº de tarjeta:</label>
            <input type="text" class="form-control" id="card-credit" placeholder="Dirección">
    </div>

    <div class="form-inline form-group">
        <div class="form-group col-md-6 pl-0">
            <label for="formGroupExampleInput ">Caducidad:</label>
            <br>
            <input type="text" class="form-control col-sm-12" id="expiration" placeholder="Código Postal">
        </div>
        <div class="form-group col-md-6 pr-0">
            <label for="formGroupExampleInput ">CVC:</label>
            <br>
            <input type="text" class="form-control col-sm-12" id="cvc" placeholder="Código Postal">
        </div>
    </div>
    Resumen:
    <hr>



    <div class="form-group">
        <label for="exampleTextarea">Notas o Intrucciones(Opcional)</label>
        <textarea class="form-control" id="intrucciones" rows="3"></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Pagar</button>
    <br>


</form>
<br>

<script>



    function sendFormPayment() {

        let theForm = document.querySelector("#formpayment")
        formData = formToJson(theForm);
        const xmlhttpPay = new XMLHttpRequest();
        sendAjaxHttp(xmlhttpPay, "POST", `Bearer {{{sessionToken}}}`, '/ddbb/create-order', formData);

        xmlhttpPay.onreadystatechange = function () {
            if (xmlhttpPay.readyState == 4) {
                var resp = xmlhttpPay.responseText;
                var respJSON = JSON.parse(resp);


                if (respJSON.status) {
                    window.location.href = "/{{lang}}/payment-ok";
                }
            }
        }

        return false;
    }

</script>